---
interface Props {
  menu: Array<{
    label: string;
    page: {
      uuid: string;
      type: string;
      url: string;
    };
  }>;
  currentPath?: string;
}

const { menu, currentPath = '' } = Astro.props;

function isActive(uuid: string): boolean {
  return currentPath.includes(uuid);
}
---

<nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg" data-testid="bottom-nav">
  <div class="max-w-md mx-auto">
    <div class="flex justify-around items-center">
      {menu.map((item) => {
        const active = isActive(item.page.uuid);
        return (
          <a
            href={`/page/${item.page.uuid}`}
            class="flex flex-col items-center justify-center py-2 px-4 min-w-0 flex-1"
            data-active={active}
            style={`color: ${
              active
                ? 'var(--color-primary, #2563eb)'
                : 'var(--color-text, #4b5563)'
            };`}
          >
            <span class="text-xs font-medium truncate w-full text-center">
              {item.label}
            </span>
          </a>
        );
      })}
    </div>
  </div>
</nav>
