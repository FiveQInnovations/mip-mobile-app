appId: com.fiveq.ffci
---
# Search result descriptions test for iOS
# Tests that search works and results appear (ticket 067)
# 
# Note: launchApp is NOT used - app is launched by script with xcrun simctl
# App should be launched with xcrun simctl before running this test:
#   xcrun simctl launch booted com.fiveq.ffci

- runFlow:
    file: "verify-header-renders.yaml"

# Tap the search icon in the header
- tapOn:
    id: "search-outline"
    index: 0

# Wait for search screen to appear
- waitForAnimationToEnd

# Wait a bit more for search input to render
- waitForAnimationToEnd:
    timeout: 2000

# Verify search input is visible (placeholder text may vary)
# Try multiple possible placeholder texts
- assertVisible:
    text: "Search..."
    optional: true

# Type a search query (using "test" - fast query per ticket 065)
- inputText: "test"

# Wait for search results to appear (should be fast with caching)
- waitForAnimationToEnd:
    timeout: 5000

# Wait for search results to be visible
- extendedWaitUntil:
    visible:
      text: "test"
    timeout: 10000

# Verify search results are displayed (at least one result appears)
- assertVisible:
    text: "test"

# Verify we're seeing search results (not empty state)
- assertNotVisible:
    text: "No results found"

# Take screenshot for manual verification of description content
- takeScreenshot:
    path: "maestro/screenshots/search-results-test-ios"
